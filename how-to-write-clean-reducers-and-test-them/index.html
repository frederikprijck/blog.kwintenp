<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>How to write clean reducers (and test them!)</title>
    <meta name="description" content="KwintenP - Blog on everything I'm interested in as a full stack developer." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/assets/images/favicon.ico" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css" />

    <!-- [[! highlight.js ]] -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/styles/default.min.css">
    <!--<style>.hljs { background: none; }</style>-->
    <!--<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.3.0/highlight.min.js"></script>-->
    <!--<script>hljs.initHighlightingOnLoad();</script>-->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="/assets/css/prism.css" rel="stylesheet">
    <link href="/assets/css/custom.css" rel="stylesheet">
    <link href="/assets/css/rrssb.css" rel="stylesheet">

    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/page2/" />

    <meta property="og:site_name" content="KwintenP" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="KwintenP" />
    <meta property="og:description" content="Blog on everything I'm interested in as a full stack developer." />
    <meta property="og:url" content="/" />
    <meta property="og:image" content="/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="KwintenP" />
    <meta name="twitter:description" content="Blog on everything I'm interested in as a full stack developer." />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image:src" content="/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Finding The Way Home",
    "url": "/",
    "image": "/assets/images/cover1.jpg",
    "description": "Blog on everything I'm interested in as a full stack developer."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="KwintenP" href="/feed.xml" />


</head>

<body class="home-template post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/">Home</a></li>
        <li class="nav-about " role="presentation"><a href="/about">About</a></li>
        <li class="nav-fables " role="presentation"><a href="/tag/fables">Fables</a></li>
        <li class="nav-speeches " role="presentation"><a href="/tag/speeches">Speeches</a></li>
        <li class="nav-fiction " role="presentation"><a href="/tag/fiction">Fiction</a></li>
        <li class="nav-author " role="presentation"><a href="/author/casper">Author</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="/feed.xml">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">
        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
<!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <!---->
        <!---->
        <a class="back-button icon-arrow-left" href="/ "> Home</a>
        <a class="subscribe-button icon-feed" href="/rss/"> Subscribe</a>
    </nav>
</header>

<main class="content" role="main">

    <article class="post">

        <header class="post-header">
            <h1 class="post-title">How to write clean reducers (and test them!)</h1>
            <section class="post-meta">
                <!-- <a href='/'>Kwinten Pisman</a> -->
                <time class="post-date" datetime="2016-08-22">22 Aug 2016
                </time>
                <!-- [[tags prefix=" on "]] -->
                
            </section>
            <section class="social-share">
                <ul class="rrssb-buttons clearfix rrssb-1">
    <li class="rrssb-email" data-initwidth="12.5" data-size="38" style="width: calc(25% - 42px);">

        <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
        <a href="mailto:?subject=How%20share()%20can%20reduce%20network%20requests&amp;body=How%20share()%20can%20reduce%20network%20requests%0A%0Ahttp%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path>
                </svg>
            </span>
            <span class="rrssb-text">email</span>
        </a>
    </li>

    <li class="rrssb-twitter" data-initwidth="12.5" data-size="45" style="width: calc(25% - 42px);">
        <!-- Replace href with your Meta and URL information  -->
        <a href="https://twitter.com/intent/tweet?text=How%20share()%20can%20reduce%20network%20requests%20http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F" class="popup">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z"></path>
                </svg>
            </span>
            <span class="rrssb-text">twitter</span>
        </a>
    </li>

    <li class="rrssb-facebook" data-initwidth="12.5" data-size="49" style="width: calc(25% - 42px);">
        <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
              https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
        <a class="popup" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29">
                    <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"></path>
                </svg>
            </span>
            <span class="rrssb-text">facebook</span>
        </a>
    </li>

    <li class="rrssb-linkedin" data-initwidth="12.5" data-size="49" style="width: calc(25% - 42px);">
        <!-- Replace href with your meta and URL information -->
        <a class="popup" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;title=How%20share()%20can%20reduce%20network%20requests&amp;summary=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
                    <path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path>
                </svg>
            </span>
            <span class="rrssb-text">linkedin</span>
        </a>
    </li>


    <li class="rrssb-reddit small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <a href="http://www.reddit.com/submit?url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;text=How%20share()%20can%20reduce%20network%20requests&amp;title=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M11.794 15.316c0-1.03-.835-1.895-1.866-1.895-1.03 0-1.893.866-1.893 1.896s.863 1.9 1.9 1.9c1.023-.016 1.865-.916 1.865-1.9zM18.1 13.422c-1.03 0-1.895.864-1.895 1.895 0 1 .9 1.9 1.9 1.865 1.03 0 1.87-.836 1.87-1.865-.006-1.017-.875-1.917-1.875-1.895zM17.527 19.79c-.678.68-1.826 1.007-3.514 1.007h-.03c-1.686 0-2.834-.328-3.51-1.005-.264-.265-.693-.265-.958 0-.264.265-.264.7 0 1 .943.9 2.4 1.4 4.5 1.402.005 0 0 0 0 0 .005 0 0 0 0 0 2.066 0 3.527-.46 4.47-1.402.265-.264.265-.693.002-.958-.267-.334-.688-.334-.988-.043z"></path>
                    <path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237-.792 0-1.517.287-2.08.76-2.04-1.294-4.647-2.068-7.44-2.218l1.484-4.69 4.062.955c.07 1.4 1.3 2.6 2.7 2.555 1.488 0 2.695-1.208 2.695-2.695C25.88 3.2 24.7 2 23.2 2c-1.06 0-1.98.616-2.42 1.508l-4.633-1.09c-.344-.082-.693.117-.803.454l-1.793 5.7C10.55 8.6 7.7 9.4 5.6 10.75c-.594-.45-1.3-.75-2.1-.72-1.785 0-3.237 1.45-3.237 3.2 0 1.1.6 2.1 1.4 2.69-.04.27-.06.55-.06.83 0 2.3 1.3 4.4 3.7 5.9 2.298 1.5 5.3 2.3 8.6 2.325 3.227 0 6.27-.825 8.57-2.325 2.387-1.56 3.7-3.66 3.7-5.917 0-.26-.016-.514-.05-.768.965-.465 1.577-1.565 1.577-2.698zm-4.52-9.912c.74 0 1.3.6 1.3 1.3 0 .738-.6 1.34-1.34 1.34s-1.343-.602-1.343-1.34c.04-.655.596-1.255 1.396-1.3zM1.646 13.3c0-1.038.845-1.882 1.883-1.882.31 0 .6.1.9.21-1.05.867-1.813 1.86-2.26 2.9-.338-.328-.57-.728-.57-1.26zm20.126 8.27c-2.082 1.357-4.863 2.105-7.83 2.105-2.968 0-5.748-.748-7.83-2.105-1.99-1.3-3.087-3-3.087-4.782 0-1.784 1.097-3.484 3.088-4.784 2.08-1.358 4.86-2.106 7.828-2.106 2.967 0 5.7.7 7.8 2.106 1.99 1.3 3.1 3 3.1 4.784C24.86 18.6 23.8 20.3 21.8 21.57zm4.014-6.97c-.432-1.084-1.19-2.095-2.244-2.977.273-.156.59-.245.928-.245 1.036 0 1.9.8 1.9 1.9-.016.522-.27 1.022-.57 1.327z"></path>
                </svg>
            </span>
            <span class="rrssb-text">reddit</span>
        </a>
    </li>

    <li class="rrssb-hackernews small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <a href="https://news.ycombinator.com/submitlink?u=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;text=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path fill="#FFF" d="M14 13.626l-4.508-9.19H6.588l6.165 12.208v6.92h2.51v-6.92l6.15-12.21H18.69"></path>
                </svg>
            </span>
            <span class="rrssb-text">hackernews</span>
        </a>
    </li>

    <li class="rrssb-googleplus small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <!-- Replace href with your meta and URL information.  -->
        <a class="popup" href="https://plus.google.com/share?url=How%20share()%20can%20reduce%20network%20requests%20http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path>
                </svg>
            </span>
            <span class="rrssb-text">google+</span>
        </a>
    </li>
    <li class="rrssb-pocket small" data-initwidth="12.5" data-size="51" style="width: 42px;">
        <a href="https://getpocket.com/save?url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg width="32" height="28" viewBox="0 0 32 28" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.782.002c2.03.002 3.193 1.12 3.182 3.106-.022 3.57.17 7.16-.158 10.7-1.09 11.773-14.588 18.092-24.6 11.573C2.72 22.458.197 18.313.057 12.937c-.09-3.36-.05-6.72-.026-10.08C.04 1.113 1.212.016 3.02.008 7.347-.006 11.678.004 16.006.002c4.258 0 8.518-.004 12.776 0zM8.65 7.856c-1.262.135-1.99.57-2.357 1.476-.392.965-.115 1.81.606 2.496 2.453 2.334 4.91 4.664 7.398 6.966 1.086 1.003 2.237.99 3.314-.013 2.407-2.23 4.795-4.482 7.17-6.747 1.203-1.148 1.32-2.468.365-3.426-1.01-1.014-2.302-.933-3.558.245-1.596 1.497-3.222 2.965-4.75 4.526-.706.715-1.12.627-1.783-.034-1.597-1.596-3.25-3.138-4.93-4.644-.47-.42-1.123-.647-1.478-.844z"></path>
                </svg>
            </span>
            <span class="rrssb-text">pocket</span>
        </a>
    </li>

</ul>
            </section>
        </header>

        <section class="post-content">

            <p>Last week, someone asked me how I kept my reducers clean and how to properly test them. Since it wasn’t the first time someone asked me that, I decided to write it down for future reference.<br />
Here it is!</p>

<p><strong>NOTE: Reducers are a part of the Redux architecture. If you do not know what I’m talking about, checkout <a href="http://redux.js.org/" target="_blank">this</a>.</strong></p>

<h3 id="reducers-basic-building-blocks">Reducers basic building blocks</h3>
<p>To me, a clean reducer has a number of different building blocks. Let’s take a look at the following example. It’s a very simple tweetsReducer that manages an array of tweets.</p>

<pre><code class="language-typescript">function tweetsReducer(
        state: State = [],
        action: Action): State {
    let tweet: Tweet;
    switch (action.type) {
        case "ADD_TWEET":
            ({tweet} = action.payload);
            return [...state, tweet];
        default:
            return state;
    }
}
</code></pre>

<p><strong>NOTE: all examples are written using typescript</strong></p>

<h4 id="default-values">Default values</h4>

<p>First thing we’re going to focus on, is the default value for the input parameter.</p>

<pre><code class="language-typescript">state: State = [];
</code></pre>

<p>To understand why defining a default parameter is important, you need to know about the lifecycle of Redux. Every Redux implementation has a method called <code>createStore</code> or something similar. This method creates the store.</p>

<p><img src="https://cdn.meme.am/instances/500x/62970260.jpg" /></p>

<p>What this method also does is dispatch an action to that newly created store. If you’ve used Redux before, then you know that the Store holds a single State object. At startup, this object doesn’t exist yet and in order to create it, every Redux implementation will dispatch an <code>INIT</code>-like action to get all the default values from the reducers and build the state tree.</p>

<p>Next is a simplified, conceptual snippet that shows what a <code>createStore</code> method could look like.</p>

<pre><code class="language-typescript">function createStore(reducer: Reducer): Store {
    // Create the new store and pass the reducer
	const store: Store = new Store(reducer)

	// dispatch an init action to the store
	store.dispatch({type: "REDUX_INIT"});

	return store;
}
</code></pre>

<p>The dispatching of the <code>INIT</code>-action will result in the reducer, for example the tweetsReducer, being called with the following parameters.</p>

<pre><code class="language-typescript">tweetsReducer(undefined, initActionDispatchedToTheStore: Action);
</code></pre>

<p>The first parameter should be the state, but since the State object is not yet created, it will be undefined. This results in the use of the default value of the state parameter, which in our tweetsReducer is an empty array. The initial value won’t always be that easy, this can also be a complex object.</p>

<p>What’s important to remember is to define default states to assure we get a nice, clean state object at startup.</p>

<p><strong>NOTE: Be sure to never define an action with the same name of your Redux implementation’s <code>INIT</code>-action. You can easily check this in the source code.</strong></p>

<p><strong>NOTE: Often, you can pass an initial state object to the <code>createStore</code> method as a second parameter. This doesn’t mean that you shouldn’t add the default values to ALL your reducers</strong></p>

<h4 id="default-case">Default case</h4>
<p>The second part I want to focus on is the default case of the switch statement. This simply returns the state object it was given.</p>

<pre><code class="language-typescript">default:
     return state;
</code></pre>

<p>In most cases, you will have multiple reducers in your application. These will be organised in a tree, matching your state object. Actions dispatched to the store will be delegated to the top reducers which will cascade, if necessary, the actions to the bottom reducers. The result of all these calls will form the new state object.<br />
If you forget to add the default case to your reducers, part of your state tree will dissapear. Take a look at the following example and imagine we’ve forgotten to implement the default case in our tweetsReducer.</p>

<pre><code class="language-typescript">// Current state tree where we manage an array of users
// and an array of tweets
let currentState: State = {
	"tweets": [
                 {
                    id: 1,
                    username:"@KwintenP",
                    content:"blogpost on clean reducers!"
                 }
	],
	"users": []
}

// we dispatch an action to add a user
store.dispatch({type: "ADD_USER", payload: {id: 1, name: "Kwinten"});
</code></pre>

<p>The store will send the action, not only to the usersReducers (left out for brevity), but also to our tweetsReducer.<br />
When the action enters our tweetsReducer, none of the cases defined would match and since we have no default case, the reducer would return undefined. This would result in the following state object.</p>

<pre><code class="language-typescript">{ "tweets": undefined, "users": [{id: 1, name: "Kwinten"}]};
</code></pre>

<p>As you can see, the tweets that were previously there, are gone. So, remember to always implement the default case to avoid that parts of your state tree disappear.</p>

<h4 id="es6-syntax-sugar">ES6 syntax sugar</h4>
<p>A little bit of ES6 syntax sugar I like to use in my reducers is the following:</p>

<pre><code class="language-typescript">//example payload
action.payload = {tweet: new Tweet(....)};

// we map the single value to the tweet property
let tweet: Tweet;
({tweet} = action.payload);
// Non ES6 equivalent
tweet = action.payload.tweet;

// example payload
action.payload = {tweet: new Tweet(...), id: 1};

// We map multiple values to the properties
let tweet: Tweet;
let id: string;
({tweet, id} = action.payload);
// non ES6 equivalent
tweet = action.payload.tweet;
id = action.payload.id;
</code></pre>

<p>I always use this ES6 shorthand in my reducers. In my tweetsReducer (see snippet at the beginning), I define a few variables above my switch statement. I then use these inside my case statements to map the payload to. The reason I do this is to make the reducer more readable. If I now wish to add a tweet to my store, I just look at the top of my case statement and I can immediately see what parameters I need to add to the payload.</p>

<pre><code class="language-typescript">case "ADD_TWEET":
        ({tweet} = action.payload); // my payload needs a tweet object
        return [...state, action.payload.tweet];
</code></pre>

<p>In this particular example this might not seem that handy, but once your reducers become (a lot) bigger, you’ll be happy if you’ve done this.</p>

<p><strong>NOTE: If you’re using action creators (out of scope for this post), and you should, the problem that it’s not clear what parameters you should pass, becomes less applicable. But, I would strongly recommend to keep doing this for when you’re writing the action creators themselves and for your unit tests.</strong></p>

<h4 id="use-reducer-composition">Use reducer composition</h4>
<p>As soon as your application grows, your reducers will become more complex. To avoid having a single reducer that manages the entire state tree, you could use the concept of reducer composition.<br />
Take a look at the next reducer (I removed the implementations of the case statements for brevity):</p>

<pre><code class="language-typescript">export function tweetsReducer(state:Array&lt;Tweet&gt; = [], action:Action):Array&lt;Tweet&gt; {
    let id:number, tweet:Tweet, tweets: Array&lt;Tweet&gt;;
    switch (action.type) {
        // first block
        case ADD_TWEET: // implementation
        case REMOVE_TWEET: // implementation
        case SET_TWEETS: // implementation
        case UPDATE_TWEET: // implementation

        // second block
        case TWEET_UN_LIKED: // implementation
        case TWEET_LIKED: // implementation
        case TWEET_UN_RETWEETED: // implementation
        case TWEET_RETWEETED: // implementation
        case TOGGLE_STAR_TWEET: // implementation
        default:
            return state;
    }
}
</code></pre>

<p>If we were to implement every case in the same reducer, this would already become quite big. If we look closely, we can see that the cases can be divided into two categories. The first block, handle the tweets collection. The second block handles an individual tweet.<br />
###### Enter reducer composition!<br />
This is an ideal example to demonstrate when you can use reducer composition. We can make the tweetsReducer handle the collection, and make a new tweetReducer, which handles a single tweet. This would look like this:</p>

<pre><code class="language-typescript">export function tweetsReducer(state:Array&lt;Tweet&gt; = [], action:Action):Array&lt;Tweet&gt; {
    let id:number, tweet:Tweet, tweets: Array&lt;Tweet&gt;;
    switch (action.type) {
        // collection block
        case ADD_TWEET: // implementation
        case REMOVE_TWEET: // implementation
        case SET_TWEETS: // implementation
        case UPDATE_TWEET: // implementation

        // single tweet block
        case TWEET_UN_LIKED:
        case TWEET_LIKED:
        case TWEET_UN_RETWEETED:
        case TWEET_RETWEETED:
        case TOGGLE_STAR_TWEET:
        // For the cases above, we delegate to the
        // tweetReducer. Here we loop the current
        // collection of tweets and if it's the one
        // we wish to update, we replace it with the
        // result of the tweetReducer.
            ({id} = action.payload);
            return state.map(tweet =&gt; tweet.id == id?
                   tweetReducer(tweet, {type: action.type, payload: {tweet}}):
                   tweet);
        default:
            return state;
    }
}

export function tweetReducer(state: Tweet = {}, action: Action) {
    let tweet: Tweet;
    switch (action.type) {
        case TOGGLE_STAR_TWEET: // implementation
        case TWEET_RETWEETED: // implementation
        case TWEET_UN_RETWEETED: // implementation
        case TWEET_LIKED: // implementation
        case TWEET_UN_LIKED: // implementation
        default: return state;
}

</code></pre>

<p>Working with reducer composition makes your individual reducers less complex to manage.</p>

<h4 id="other-tips">Other tips</h4>

<ol>
  <li>You MUST keep your reducers immutable! You can use the new <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" target="_blank">‘Object.assign’</a> and the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator" target="_blank">spread operator</a> from ES6 or libraries as <a href="https://facebook.github.io/immutable-js/" target="_blank">Immutable.js</a> or <a href="https://github.com/rtfeldman/seamless-immutable" target="_blank">seamless-immutable</a> to do this.</li>
  <li>When you’re using reducer composition, combine your delegating cases at the bottom of your reducer. In the example of reducer composition, all the calls to the tweetReducer are combined at the bottom. This is merely a convention that I’ve found useful in the past.</li>
</ol>

<h4 id="how-to-test-them">How to test them</h4>
<p>Testing reducers is quite easy and straightforward. You send a state object and an action to the reducer en check your result. But, you cannot forget to test the immutability of your reducers. To ensure this, you can use a library called deepFreeze. Check out this next example.</p>

<pre><code class="language-typescript">describe("reducer: tweetsReducer", () =&gt; {
    describe("on ADD_TWEET", () =&gt; {
        it("should add a tweet to the
           current list of tweets", () =&gt; {
            // create the initial state object
            let tweet: Tweet = new Tweet(...);
            let initialState: Array&lt;Tweet&gt; = [tweet];

            // perform a deepFreeze on the initial state object
            deepFreeze(initialState);

            // create the payload
            let tweetToAdd: Tweet = new Tweet(...);
            let payload: any = {tweet: tweetToAdd};

            // Sent the action to the tweetsReducer
            let changedState: Array&lt;Tweet&gt; = tweetsReducer(initialState,
                {
                    type: ADD_TWEET,
                    payload
                });

            // Verify the changes are correct
            expect(changedState.length).toBe(2);
            expect(changedState[1]).toBe(payload.tweet);
        });
    });
});
</code></pre>

<p>As you can see, testing reducers consists of four steps:<br />
1. Create an <code>initialState</code> object.<br />
2. Perform a deepFreeze on the <code>initialState</code> object. This library will perform a recursive <code>Object.freeze()</code> on the entire state object protecting it from mutation. This is an easily overlooked but extremely important step in the testing of your reducers!<br />
3. Call the reducer with the initial state and the correct action.<br />
4. Verify the result of your reducer.</p>

<p>At least one test should be added for every case in your reducer’s switch statement. Besides those, you should also add a test for an unknown action to verify you’ve implemented the default case. And one more test for the <code>INIT</code>-action to make sure you’ve defined a default value for your state. In this particular test you pass undefined as your state value.</p>

<h4 id="summary">Summary</h4>
<ul>
  <li>Use <strong>default values</strong> for your state object in your reducer</li>
  <li>Implement the <strong>default case</strong> to just return the state</li>
  <li>Use ES6 syntax sugar to make your reducers look more clean</li>
  <li>Use <strong>reducer composition</strong> when necessary</li>
  <li>Reducers MUST be <strong>immutable</strong></li>
  <li>Use <strong>deepFreeze</strong> while testing to <strong>ensure immutability</strong></li>
  <li>Combine your delegating cases at the bottom of your reducer</li>
</ul>


        </section>

        <section class="social-share">
            <ul class="rrssb-buttons clearfix rrssb-1">
    <li class="rrssb-email" data-initwidth="12.5" data-size="38" style="width: calc(25% - 42px);">

        <!-- Replace subject with your message using URL Endocding: http://meyerweb.com/eric/tools/dencoder/ -->
        <a href="mailto:?subject=How%20share()%20can%20reduce%20network%20requests&amp;body=How%20share()%20can%20reduce%20network%20requests%0A%0Ahttp%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M20.11 26.147c-2.335 1.05-4.36 1.4-7.124 1.4C6.524 27.548.84 22.916.84 15.284.84 7.343 6.602.45 15.4.45c6.854 0 11.8 4.7 11.8 11.252 0 5.684-3.193 9.265-7.398 9.3-1.83 0-3.153-.934-3.347-2.997h-.077c-1.208 1.986-2.96 2.997-5.023 2.997-2.532 0-4.36-1.868-4.36-5.062 0-4.75 3.503-9.07 9.11-9.07 1.713 0 3.7.4 4.6.972l-1.17 7.203c-.387 2.298-.115 3.3 1 3.4 1.674 0 3.774-2.102 3.774-6.58 0-5.06-3.27-8.994-9.304-8.994C9.05 2.87 3.83 7.545 3.83 14.97c0 6.5 4.2 10.2 10 10.202 1.987 0 4.09-.43 5.647-1.245l.634 2.22zM16.647 10.1c-.31-.078-.7-.155-1.207-.155-2.572 0-4.596 2.53-4.596 5.53 0 1.5.7 2.4 1.9 2.4 1.44 0 2.96-1.83 3.31-4.088l.592-3.72z"></path>
                </svg>
            </span>
            <span class="rrssb-text">email</span>
        </a>
    </li>

    <li class="rrssb-twitter" data-initwidth="12.5" data-size="45" style="width: calc(25% - 42px);">
        <!-- Replace href with your Meta and URL information  -->
        <a href="https://twitter.com/intent/tweet?text=How%20share()%20can%20reduce%20network%20requests%20http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F" class="popup">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M24.253 8.756C24.69 17.08 18.297 24.182 9.97 24.62c-3.122.162-6.22-.646-8.86-2.32 2.702.18 5.375-.648 7.507-2.32-2.072-.248-3.818-1.662-4.49-3.64.802.13 1.62.077 2.4-.154-2.482-.466-4.312-2.586-4.412-5.11.688.276 1.426.408 2.168.387-2.135-1.65-2.73-4.62-1.394-6.965C5.574 7.816 9.54 9.84 13.802 10.07c-.842-2.738.694-5.64 3.434-6.48 2.018-.624 4.212.043 5.546 1.682 1.186-.213 2.318-.662 3.33-1.317-.386 1.256-1.248 2.312-2.4 2.942 1.048-.106 2.07-.394 3.02-.85-.458 1.182-1.343 2.15-2.48 2.71z"></path>
                </svg>
            </span>
            <span class="rrssb-text">twitter</span>
        </a>
    </li>

    <li class="rrssb-facebook" data-initwidth="12.5" data-size="49" style="width: calc(25% - 42px);">
        <!--  Replace with your URL. For best results, make sure you page has the proper FB Open Graph tags in header:
              https://developers.facebook.com/docs/opengraph/howtos/maximizing-distribution-media-content/ -->
        <a class="popup" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29">
                    <path d="M26.4 0H2.6C1.714 0 0 1.715 0 2.6v23.8c0 .884 1.715 2.6 2.6 2.6h12.393V17.988h-3.996v-3.98h3.997v-3.062c0-3.746 2.835-5.97 6.177-5.97 1.6 0 2.444.173 2.845.226v3.792H21.18c-1.817 0-2.156.9-2.156 2.168v2.847h5.045l-.66 3.978h-4.386V29H26.4c.884 0 2.6-1.716 2.6-2.6V2.6c0-.885-1.716-2.6-2.6-2.6z"></path>
                </svg>
            </span>
            <span class="rrssb-text">facebook</span>
        </a>
    </li>

    <li class="rrssb-linkedin" data-initwidth="12.5" data-size="49" style="width: calc(25% - 42px);">
        <!-- Replace href with your meta and URL information -->
        <a class="popup" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;title=How%20share()%20can%20reduce%20network%20requests&amp;summary=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
                    <path d="M25.424 15.887v8.447h-4.896v-7.882c0-1.98-.71-3.33-2.48-3.33-1.354 0-2.158.91-2.514 1.802-.13.315-.162.753-.162 1.194v8.216h-4.9s.067-13.35 0-14.73h4.9v2.087c-.01.017-.023.033-.033.05h.032v-.05c.65-1.002 1.812-2.435 4.414-2.435 3.222 0 5.638 2.106 5.638 6.632zM5.348 2.5c-1.676 0-2.772 1.093-2.772 2.54 0 1.42 1.066 2.538 2.717 2.546h.032c1.71 0 2.77-1.132 2.77-2.546C8.056 3.593 7.02 2.5 5.344 2.5h.005zm-2.48 21.834h4.896V9.604H2.867v14.73z"></path>
                </svg>
            </span>
            <span class="rrssb-text">linkedin</span>
        </a>
    </li>


    <li class="rrssb-reddit small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <a href="http://www.reddit.com/submit?url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;text=How%20share()%20can%20reduce%20network%20requests&amp;title=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path d="M11.794 15.316c0-1.03-.835-1.895-1.866-1.895-1.03 0-1.893.866-1.893 1.896s.863 1.9 1.9 1.9c1.023-.016 1.865-.916 1.865-1.9zM18.1 13.422c-1.03 0-1.895.864-1.895 1.895 0 1 .9 1.9 1.9 1.865 1.03 0 1.87-.836 1.87-1.865-.006-1.017-.875-1.917-1.875-1.895zM17.527 19.79c-.678.68-1.826 1.007-3.514 1.007h-.03c-1.686 0-2.834-.328-3.51-1.005-.264-.265-.693-.265-.958 0-.264.265-.264.7 0 1 .943.9 2.4 1.4 4.5 1.402.005 0 0 0 0 0 .005 0 0 0 0 0 2.066 0 3.527-.46 4.47-1.402.265-.264.265-.693.002-.958-.267-.334-.688-.334-.988-.043z"></path>
                    <path d="M27.707 13.267c0-1.785-1.453-3.237-3.236-3.237-.792 0-1.517.287-2.08.76-2.04-1.294-4.647-2.068-7.44-2.218l1.484-4.69 4.062.955c.07 1.4 1.3 2.6 2.7 2.555 1.488 0 2.695-1.208 2.695-2.695C25.88 3.2 24.7 2 23.2 2c-1.06 0-1.98.616-2.42 1.508l-4.633-1.09c-.344-.082-.693.117-.803.454l-1.793 5.7C10.55 8.6 7.7 9.4 5.6 10.75c-.594-.45-1.3-.75-2.1-.72-1.785 0-3.237 1.45-3.237 3.2 0 1.1.6 2.1 1.4 2.69-.04.27-.06.55-.06.83 0 2.3 1.3 4.4 3.7 5.9 2.298 1.5 5.3 2.3 8.6 2.325 3.227 0 6.27-.825 8.57-2.325 2.387-1.56 3.7-3.66 3.7-5.917 0-.26-.016-.514-.05-.768.965-.465 1.577-1.565 1.577-2.698zm-4.52-9.912c.74 0 1.3.6 1.3 1.3 0 .738-.6 1.34-1.34 1.34s-1.343-.602-1.343-1.34c.04-.655.596-1.255 1.396-1.3zM1.646 13.3c0-1.038.845-1.882 1.883-1.882.31 0 .6.1.9.21-1.05.867-1.813 1.86-2.26 2.9-.338-.328-.57-.728-.57-1.26zm20.126 8.27c-2.082 1.357-4.863 2.105-7.83 2.105-2.968 0-5.748-.748-7.83-2.105-1.99-1.3-3.087-3-3.087-4.782 0-1.784 1.097-3.484 3.088-4.784 2.08-1.358 4.86-2.106 7.828-2.106 2.967 0 5.7.7 7.8 2.106 1.99 1.3 3.1 3 3.1 4.784C24.86 18.6 23.8 20.3 21.8 21.57zm4.014-6.97c-.432-1.084-1.19-2.095-2.244-2.977.273-.156.59-.245.928-.245 1.036 0 1.9.8 1.9 1.9-.016.522-.27 1.022-.57 1.327z"></path>
                </svg>
            </span>
            <span class="rrssb-text">reddit</span>
        </a>
    </li>

    <li class="rrssb-hackernews small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <a href="https://news.ycombinator.com/submitlink?u=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F&amp;text=How%20share()%20can%20reduce%20network%20requests">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28">
                    <path fill="#FFF" d="M14 13.626l-4.508-9.19H6.588l6.165 12.208v6.92h2.51v-6.92l6.15-12.21H18.69"></path>
                </svg>
            </span>
            <span class="rrssb-text">hackernews</span>
        </a>
    </li>

    <li class="rrssb-googleplus small" data-initwidth="12.5" data-size="45" style="width: 42px;">
        <!-- Replace href with your meta and URL information.  -->
        <a class="popup" href="https://plus.google.com/share?url=How%20share()%20can%20reduce%20network%20requests%20http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                    <path d="M21 8.29h-1.95v2.6h-2.6v1.82h2.6v2.6H21v-2.6h2.6v-1.885H21V8.29zM7.614 10.306v2.925h3.9c-.26 1.69-1.755 2.925-3.9 2.925-2.34 0-4.29-2.016-4.29-4.354s1.885-4.353 4.29-4.353c1.104 0 2.014.326 2.794 1.105l2.08-2.08c-1.3-1.17-2.924-1.883-4.874-1.883C3.65 4.586.4 7.835.4 11.8s3.25 7.212 7.214 7.212c4.224 0 6.953-2.988 6.953-7.082 0-.52-.065-1.104-.13-1.624H7.614z"></path>
                </svg>
            </span>
            <span class="rrssb-text">google+</span>
        </a>
    </li>
    <li class="rrssb-pocket small" data-initwidth="12.5" data-size="51" style="width: 42px;">
        <a href="https://getpocket.com/save?url=http%3A%2F%2Fblog.kwintenp.com%2Fhow-share-can-reduce-network-requests%2F">
            <span class="rrssb-icon">
                <svg width="32" height="28" viewBox="0 0 32 28" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.782.002c2.03.002 3.193 1.12 3.182 3.106-.022 3.57.17 7.16-.158 10.7-1.09 11.773-14.588 18.092-24.6 11.573C2.72 22.458.197 18.313.057 12.937c-.09-3.36-.05-6.72-.026-10.08C.04 1.113 1.212.016 3.02.008 7.347-.006 11.678.004 16.006.002c4.258 0 8.518-.004 12.776 0zM8.65 7.856c-1.262.135-1.99.57-2.357 1.476-.392.965-.115 1.81.606 2.496 2.453 2.334 4.91 4.664 7.398 6.966 1.086 1.003 2.237.99 3.314-.013 2.407-2.23 4.795-4.482 7.17-6.747 1.203-1.148 1.32-2.468.365-3.426-1.01-1.014-2.302-.933-3.558.245-1.596 1.497-3.222 2.965-4.75 4.526-.706.715-1.12.627-1.783-.034-1.597-1.596-3.25-3.138-4.93-4.644-.47-.42-1.123-.647-1.478-.844z"></path>
                </svg>
            </span>
            <span class="rrssb-text">pocket</span>
        </a>
    </li>

</ul>
        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/author/KwintenP"
                   style="background-image: url(/assets/images/me.jpg)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/author/KwintenP">Kwinten Pisman</a></h4>

                
                <p> Passionate software engineer</p>
                
                <div class="author-meta">
                    <span class="author-location icon-location"> Belgium</span>
                    <span class="author-link icon-link"><a
                        href="https://blog.kwintenp.com"> </a></span>
                </div>
            </section>

            <!-- /author  -->

            <!--<section class="share">-->
            <!--<h4>Share this post</h4>-->
            <!--<a class="icon-twitter" href="http://twitter.com/share?text=How to write clean reducers (and test them!)&amp;url=https://blog.kwintenp.comhow-to-write-clean-reducers-and-test-them"-->
            <!--onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">-->
            <!--<span class="hidden">Twitter</span>-->
            <!--</a>-->
            <!--<a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.kwintenp.comhow-to-write-clean-reducers-and-test-them"-->
            <!--onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">-->
            <!--<span class="hidden">Facebook</span>-->
            <!--</a>-->
            <!--<a class="icon-google-plus" href="https://plus.google.com/share?url=https://blog.kwintenp.comhow-to-write-clean-reducers-and-test-them"-->
            <!--onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">-->
            <!--<span class="hidden">Google+</span>-->
            <!--</a>-->
            <!--</section>-->

            <!-- Add Disqus Comments -->

            <div id="disqus_thread"></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'kwintenpghostio'; // required: replace example with your forum shortname
        var disqus_identifier = 'blog.kwintenp.com/how-to-write-clean-reducers-and-test-them/';
        var disqus_url = 'https://blog.kwintenp.com/how-to-write-clean-reducers-and-test-them/';


        /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>


        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
    <a class="read-next-story no-cover"
       href="/combinereducers-enhanced">
        <section class="post">
            <h2>combineReducers enhanced</h2>
            <p>When working with redux or ngrx/store, you get a lovely utillity method called `combineReducers` that...</p>
        </section>
    </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
    <a class="read-next-story prev "
       style="background-image: url(/assets/images/zone.png)"
       href="/how-the-hell-do-zones-really-work">
        <section class="post">
            <h2>How the hell does zone.js really work?</h2>
            <p>If you’ve read about Angular 2 change detection, you will probably have heard about zones....</p>
        </section>
    </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/">KwintenP</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>
    <script type="text/javascript" src="/assets/js/prism.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-76318751-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
